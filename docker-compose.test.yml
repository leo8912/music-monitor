services:
  music-monitor-test:
    build: . # 使用本地 Dockerfile 构建
    container_name: music-monitor-test
    restart: unless-stopped
    volumes:
      - ./config:/config # 使用当前项目的 config 目录
      - ./cache:/audio_cache # 缓存目录
      - ./favorites:/favorites # 收藏目录
    environment:
      - DATABASE_URL=sqlite:////config/music_monitor.db
      - TZ=Asia/Shanghai
      - PUID=1000 # Windows 下可忽略，主要用于 Linux/NAS
      - PGID=1000
    network_mode: bridge
    ports:
      - "18001:8000" # 映射到 18001 避免与本地开发冲突
