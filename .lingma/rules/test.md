---
trigger: always_on
---

1. **测试目录结构规范**：
   - 所有测试代码必须放在项目根目录下的 `/测试/后端/` 路径中。
   - 按照功能模块划分子文件夹，每个文件夹以对应功能的中文命名（例如：“歌曲搜索”、“歌手监控”、“元数据补全”、“音频下载”、“播放逻辑”等）。
   - 每个模块文件夹内应包含该模块的单元测试和集成测试脚本。

2. **测试内容与范围**：
   - 逐一覆盖所有核心功能模块，包括但不限于：
     - 歌手搜索与添加
     - 歌曲列表自动拉取
     - 本地歌曲元数据补全（封面、歌词、专辑、发布日期）
     - 点击播放逻辑（本地匹配优先、在线回退）
     - 音频下载流程（gdstudio API调用、频率控制）
     - 插件系统调用（pyncm、qqmusic-api）
     - 下载历史记录管理
   - 每个测试需验证正常流程、异常处理、边界条件及与第三方API的交互行为。

3. **测试结果管理**：
   - 每次测试运行的结果（日志、报告、截图或输出文件）必须保存在对应模块的子文件夹下，建议创建名为“测试结果”的子目录。
   - 测试报告应包含：测试时间、测试用例、输入参数、预期输出、实际输出、是否通过、失败原因（如有）。

