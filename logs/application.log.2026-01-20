2026-01-20 11:54:07,319 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 11:54:07,319 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 11:54:07,320 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 11:54:07,320 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 11:54:07,320 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 11:59:35,988 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 11:59:35,989 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 11:59:35,989 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 11:59:35,990 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 11:59:35,990 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:00:03,906 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:00:03,906 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:00:03,906 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:00:03,907 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:00:03,907 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:01:05,547 - core.audio_downloader - INFO - Search Songs [netease]: 我不要原谅你 宿羽阳
2026-01-20 12:01:05,548 - core.audio_downloader - INFO - Search Songs [qqmusic]: 我不要原谅你 宿羽阳
2026-01-20 12:01:05,549 - core.audio_downloader - INFO - Search Songs [kugou]: 我不要原谅你 宿羽阳
2026-01-20 12:01:05,549 - core.audio_downloader - INFO - Search Songs [kuwo]: 我不要原谅你 宿羽阳
2026-01-20 12:01:05,550 - core.audio_downloader - INFO - Search Songs [migu]: 我不要原谅你 宿羽阳
2026-01-20 12:02:19,370 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:02:19,371 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:02:19,371 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:02:19,371 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:02:19,372 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:02:46,605 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:02:46,605 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:02:46,605 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:02:46,606 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:02:46,606 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:02:56,277 - core.audio_downloader - INFO - 酷狗歌词获取成功: 我偏要吻你破碎
2026-01-20 12:02:56,563 - core.audio_downloader - INFO - 酷狗歌词获取成功: 我偏要吻你破碎
2026-01-20 12:03:29,157 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:03:29,158 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:03:29,158 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:03:29,158 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:03:29,158 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:06:20,467 - core.audio_downloader - INFO - 酷狗歌词获取成功: 我偏要吻你破碎
2026-01-20 12:06:20,765 - core.audio_downloader - INFO - 酷狗歌词获取成功: 我偏要吻你破碎
2026-01-20 12:10:11,619 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:10:11,620 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:10:11,620 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:10:11,621 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:10:11,621 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:12:26,015 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:12:26,016 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:12:26,016 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:12:26,016 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:12:26,017 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:24:08,459 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:24:08,460 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:24:08,460 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:24:08,460 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:24:08,460 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:31:11,106 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:31:11,107 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:31:11,107 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:31:11,108 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:31:11,108 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:33:46,206 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:33:46,206 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:33:46,206 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:33:46,207 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:33:46,207 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:36:25,760 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:36:25,761 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:36:25,761 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:36:25,761 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:36:25,762 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:36:56,204 - app.routers.wechat - ERROR - Bg add artist error: name 'add_monitored_user' is not defined
2026-01-20 12:36:56,204 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-11' coro=<background_add_artist() done, defined at D:\code\music-monitor\app\routers\wechat.py:252> exception=NameError("name 'WeComNotifier' is not defined")>
Traceback (most recent call last):
  File "D:\code\music-monitor\app\routers\wechat.py", line 259, in background_add_artist
    success = add_monitored_user(source, uid, name)
              ^^^^^^^^^^^^^^^^^^
NameError: name 'add_monitored_user' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code\music-monitor\app\routers\wechat.py", line 270, in background_add_artist
    await WeComNotifier().send_text(f"❌ 系统错误：{e}", [user_id])
          ^^^^^^^^^^^^^
NameError: name 'WeComNotifier' is not defined
2026-01-20 12:39:41,725 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:39:41,726 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:39:41,726 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:39:41,726 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:39:41,726 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:40:08,861 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:40:08,862 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:40:08,862 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:40:08,862 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:40:08,863 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:40:31,490 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:40:31,490 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:40:31,490 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:40:31,491 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:40:31,491 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:40:49,944 - app.routers.wechat - ERROR - Bg add artist error: WeComNotifier.__init__() missing 3 required positional arguments: 'corp_id', 'secret', and 'agent_id'
2026-01-20 12:40:49,944 - asyncio - ERROR - Task exception was never retrieved
future: <Task finished name='Task-11' coro=<background_add_artist() done, defined at D:\code\music-monitor\app\routers\wechat.py:253> exception=TypeError("WeComNotifier.__init__() missing 3 required positional arguments: 'corp_id', 'secret', and 'agent_id'")>
Traceback (most recent call last):
  File "D:\code\music-monitor\app\routers\wechat.py", line 263, in background_add_artist
    await WeComNotifier().send_text(f"✅ 已添加 {name} 到 {source} 监控列表！\n正在尝试同步新歌...", [user_id])
          ~~~~~~~~~~~~~^^
TypeError: WeComNotifier.__init__() missing 3 required positional arguments: 'corp_id', 'secret', and 'agent_id'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\code\music-monitor\app\routers\wechat.py", line 271, in background_add_artist
    await WeComNotifier().send_text(f"❌ 系统错误：{e}", [user_id])
          ~~~~~~~~~~~~~^^
TypeError: WeComNotifier.__init__() missing 3 required positional arguments: 'corp_id', 'secret', and 'agent_id'
2026-01-20 12:42:39,501 - app.routers.media - INFO - 删除歌手 任素汐 (netease) 及其 0 首歌曲
2026-01-20 12:43:41,299 - app.services.media_service - INFO - Smart Search Netease: Found 任素汐 (1054159)
2026-01-20 12:43:44,404 - app.services.media_service - INFO - Smart Search QQMusic: Found 任素汐 (001GAeOa0SeDvI)
2026-01-20 12:43:44,404 - app.services.media_service - INFO - 所有平台搜索成功，找到2个结果
2026-01-20 12:43:44,406 - app.services.media_service - INFO - Executing immediate sync for new artist: 任素汐 (netease)
2026-01-20 12:43:44,407 - app.services.media_service - INFO - Executing immediate sync for new artist: 任素汐 (qqmusic)
2026-01-20 12:43:44,407 - plugins.qqmusic - INFO - 正在获取 QQ 音乐数据: 任素汐 (001GAeOa0SeDvI)
2026-01-20 12:43:44,613 - plugins.qqmusic - INFO - qqmusic_api返回 89 首歌曲
2026-01-20 12:43:44,614 - plugins.qqmusic - INFO - QQ音乐获取完成: 任素汐 共 59 首歌曲
2026-01-20 12:43:44,616 - app.services.media_service - INFO - 发现新内容: 困 (qqmusic:song:000LmxbB0b3vn4)
2026-01-20 12:43:44,623 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 困 (已存在于 qqmusic)
2026-01-20 12:43:44,623 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 困 (已存在于 qqmusic)
2026-01-20 12:43:44,624 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 困 (已存在于 qqmusic)
2026-01-20 12:43:44,625 - app.services.media_service - INFO - 发现新内容: 月光光 (qqmusic:song:001McYuQ2JIgtJ)
2026-01-20 12:43:44,630 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 月光光 (已存在于 qqmusic)
2026-01-20 12:43:44,631 - app.services.media_service - INFO - 发现新内容: 好 (qqmusic:song:003YYfQv3tAgSi)
2026-01-20 12:43:44,637 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 好 (已存在于 qqmusic)
2026-01-20 12:43:44,637 - app.services.media_service - INFO - 发现新内容: 亲爱的你啊 (qqmusic:song:003kINoq3bLZFF)
2026-01-20 12:43:44,643 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 亲爱的你啊 (已存在于 qqmusic)
2026-01-20 12:43:44,643 - app.services.media_service - INFO - 发现新内容: 亲爱的你啊 (qqmusic:song:002Nlyic0bX7Tc)
2026-01-20 12:43:44,649 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 亲爱的你啊 (已存在于 qqmusic)
2026-01-20 12:43:44,650 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 亲爱的你啊 (已存在于 qqmusic)
2026-01-20 12:43:44,650 - app.services.media_service - INFO - 发现新内容: 别松手啊 我最好的傻瓜 (qqmusic:song:001t6Yps2Ww5xx)
2026-01-20 12:43:44,656 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 别松手啊 我最好的傻瓜 (已存在于 qqmusic)
2026-01-20 12:43:44,657 - app.services.media_service - INFO - 发现新内容: 莫怕莫怕 (qqmusic:song:0048R0Fi3umF1w)
2026-01-20 12:43:44,662 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 莫怕莫怕 (已存在于 qqmusic)
2026-01-20 12:43:44,662 - app.services.media_service - INFO - 发现新内容: 愿人生 (qqmusic:song:000N0Xdc34EOuW)
2026-01-20 12:43:44,668 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 愿人生 (已存在于 qqmusic)
2026-01-20 12:43:44,669 - app.services.media_service - INFO - 发现新内容: 擦拭过去 (qqmusic:song:004GTVED1aCWHM)
2026-01-20 12:43:44,675 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 擦拭过去 (已存在于 qqmusic)
2026-01-20 12:43:44,675 - app.services.media_service - INFO - 发现新内容: 歌曲：枕着光的她 (qqmusic:song:003BKpa60tTZKL)
2026-01-20 12:43:44,681 - app.services.media_service - INFO - 发现新内容: 枕着光的她 (qqmusic:song:000EAxZ71qBtj1)
2026-01-20 12:43:44,686 - app.services.media_service - INFO - 发现新内容: 我要你 (我要你在我身旁) (qqmusic:song:0005Aaxw0qT9Fl)
2026-01-20 12:43:44,692 - app.services.media_service - INFO - 发现新内容: 胡广生 (我欠你啥子嘛) (qqmusic:song:003gdHTl2kLr4d)
2026-01-20 12:43:44,697 - app.services.media_service - INFO - 发现新内容: 王招君 (你看你拉住我的模样) (qqmusic:song:001D51640M6ZeR)
2026-01-20 12:43:44,702 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 枕着光的她 (已存在于 qqmusic)
2026-01-20 12:43:44,703 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 胡广生 (我欠你啥子嘛) (已存在于 qqmusic)
2026-01-20 12:43:44,703 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 我要你 (我要你在我身旁) (已存在于 qqmusic)
2026-01-20 12:43:44,704 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 王招君 (你看你拉住我的模样) (已存在于 qqmusic)
2026-01-20 12:43:44,705 - app.services.media_service - INFO - 发现新内容: 大儿歌 (qqmusic:song:0016E9LF25BXta)
2026-01-20 12:43:44,710 - app.services.media_service - INFO - 发现新内容: 岁岁 (qqmusic:song:001CnSwn2xF1ee)
2026-01-20 12:43:44,715 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 大儿歌 (已存在于 qqmusic)
2026-01-20 12:43:44,716 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 岁岁 (已存在于 qqmusic)
2026-01-20 12:43:44,717 - app.services.media_service - INFO - 发现新内容: 大梦 (qqmusic:song:002DMjjy3Sylc8)
2026-01-20 12:43:44,722 - app.services.media_service - INFO - 发现新内容: 荒原 (qqmusic:song:001s4RRc2jE9qh)
2026-01-20 12:43:44,727 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 荒原 (已存在于 qqmusic)
2026-01-20 12:43:44,728 - app.services.media_service - INFO - 发现新内容: 北方 (qqmusic:song:0038Adgq0h6Sbv)
2026-01-20 12:43:44,733 - app.services.media_service - INFO - 发现新内容: 亲爱的小孩 (qqmusic:song:002TRIsO3N4CaF)
2026-01-20 12:43:44,738 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 北方 (已存在于 qqmusic)
2026-01-20 12:43:44,739 - app.services.media_service - INFO - 发现新内容: 风吹过的时候 (qqmusic:song:002qDc6n1uP4Jz)
2026-01-20 12:43:44,744 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 风吹过的时候 (已存在于 qqmusic)
2026-01-20 12:43:44,745 - app.services.media_service - INFO - 发现新内容: 有一点动心 (qqmusic:song:002jw9FM30q467)
2026-01-20 12:43:44,750 - app.services.media_service - INFO - 发现新内容: 我要你 (qqmusic:song:002pnqxa4JcSU1)
2026-01-20 12:43:44,756 - app.services.media_service - INFO - 发现新内容: Unsaid (qqmusic:song:001IVJVq0odTDS)
2026-01-20 12:43:44,761 - app.services.media_service - INFO - 跳过重复内容 (跨平台): Unsaid (已存在于 qqmusic)
2026-01-20 12:43:44,762 - app.services.media_service - INFO - 发现新内容: 和你在一起 (qqmusic:song:000U8WDY2iZvyI)
2026-01-20 12:43:44,767 - app.services.media_service - INFO - 发现新内容: 胡广生 (qqmusic:song:003RbV2j1CZVpd)
2026-01-20 12:43:44,773 - app.services.media_service - INFO - 发现新内容: 最佳损友 (qqmusic:song:004aHCfZ3VDYG3)
2026-01-20 12:43:44,778 - app.services.media_service - INFO - 发现新内容: 胡广生 (qqmusic:song:0031HkWT37OzaR)
2026-01-20 12:43:44,783 - app.services.media_service - INFO - Immediate sync finished for 任素汐. Added 28 new songs.
2026-01-20 12:43:44,784 - app.services.media_service - INFO - Auto-cache start: Found 2 recent songs missing local file.
2026-01-20 12:43:44,784 - app.services.media_service - INFO - Auto-caching recent song: 困 (qqmusic)
2026-01-20 12:43:44,784 - core.audio_downloader - INFO - 开始处理: 任素汐 - 困
2026-01-20 12:43:45,066 - notifiers.wecom - INFO - 企业微信图文推送成功: ❤️ 关注成功: 任素汐
2026-01-20 12:43:45,066 - plugins.netease - INFO - 正在获取网易云歌曲: 任素汐 (1054159)
2026-01-20 12:43:45,423 - plugins.netease - INFO - 网易云返回 65 首歌曲 (歌手共 65 首)
2026-01-20 12:43:45,424 - plugins.netease - INFO - 网易云获取完成: 任素汐 共 65 首歌曲
2026-01-20 12:43:45,425 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 困 (已存在于 qqmusic)
2026-01-20 12:43:45,426 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 困 (已存在于 qqmusic)
2026-01-20 12:43:45,426 - app.services.media_service - INFO - 发现新内容: 困 (伴奏) (netease:song:3322756222)
2026-01-20 12:43:45,432 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 困 (伴奏) (已存在于 netease)
2026-01-20 12:43:45,432 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 月光光 (已存在于 qqmusic)
2026-01-20 12:43:45,433 - app.services.media_service - INFO - 发现新内容: 月光光 (伴奏) (netease:song:2755333110)
2026-01-20 12:43:45,438 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 好 (已存在于 qqmusic)
2026-01-20 12:43:45,439 - app.services.media_service - INFO - 发现新内容: 好 (伴奏) (netease:song:2727725929)
2026-01-20 12:43:45,444 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 亲爱的你啊 (已存在于 qqmusic)
2026-01-20 12:43:45,445 - app.services.media_service - INFO - 发现新内容: 亲爱的你啊（伴奏） (netease:song:2704972896)
2026-01-20 12:43:45,450 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 亲爱的你啊 (已存在于 qqmusic)
2026-01-20 12:43:45,451 - app.services.media_service - INFO - 发现新内容: 亲爱的你啊 (伴奏) (netease:song:2697656416)
2026-01-20 12:43:45,456 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 别松手啊 我最好的傻瓜 (已存在于 qqmusic)
2026-01-20 12:43:45,457 - app.services.media_service - INFO - 发现新内容: 别松手啊 我最好的傻瓜 (伴奏) (netease:song:2688491136)
2026-01-20 12:43:45,462 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 荒原 (已存在于 qqmusic)
2026-01-20 12:43:45,463 - app.services.media_service - INFO - 发现新内容: 莫怕莫怕 (netease:song:2620872938)
2026-01-20 12:43:45,468 - app.services.media_service - INFO - 发现新内容: 莫怕莫怕 (伴奏) (netease:song:2620872937)
2026-01-20 12:43:45,475 - app.services.media_service - INFO - 发现新内容: 愿人生 (netease:song:2614502546)
2026-01-20 12:43:45,480 - app.services.media_service - INFO - 发现新内容: 愿人生 (伴奏) (netease:song:2614502545)
2026-01-20 12:43:45,485 - app.services.media_service - INFO - 发现新内容: 擦拭过去 (伴奏) (netease:song:2140033854)
2026-01-20 12:43:45,490 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 擦拭过去 (已存在于 qqmusic)
2026-01-20 12:43:45,490 - app.services.media_service - INFO - 发现新内容: 王招君 (netease:song:1838919030)
2026-01-20 12:43:45,496 - app.services.media_service - INFO - 发现新内容: 歌曲：枕着光的她 (Live) (netease:song:2668021730)
2026-01-20 12:43:45,504 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 胡广生 (我欠你啥子嘛) (已存在于 qqmusic)
2026-01-20 12:43:45,505 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 我要你 (我要你在我身旁) (已存在于 qqmusic)
2026-01-20 12:43:45,506 - app.services.media_service - INFO - 发现新内容: 王招君 (伴奏) (netease:song:1838919042)
2026-01-20 12:43:45,511 - app.services.media_service - INFO - 发现新内容: 胡广生 (我欠你啥子嘛) (伴奏) (netease:song:2123822355)
2026-01-20 12:43:45,516 - app.services.media_service - INFO - 发现新内容: 我要你 (我要你在我身旁) (伴奏) (netease:song:2123822356)
2026-01-20 12:43:45,521 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 枕着光的她 (已存在于 qqmusic)
2026-01-20 12:43:45,521 - app.services.media_service - INFO - 发现新内容: 枕着光的她 (伴奏) (netease:song:2128870218)
2026-01-20 12:43:45,527 - app.services.media_service - INFO - 发现新内容: 大儿歌 (netease:song:2103689933)
2026-01-20 12:43:45,532 - app.services.media_service - INFO - 发现新内容: 大儿歌 (伴奏) (netease:song:2103689934)
2026-01-20 12:43:45,537 - app.services.media_service - INFO - 发现新内容: 岁岁 (伴奏) (netease:song:2103692082)
2026-01-20 12:43:45,543 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 岁岁 (已存在于 qqmusic)
2026-01-20 12:43:45,543 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 大儿歌 (已存在于 qqmusic)
2026-01-20 12:43:45,544 - app.services.media_service - INFO - 发现新内容: 大儿歌 (伴奏) (netease:song:2103690112)
2026-01-20 12:43:45,549 - app.services.media_service - INFO - 发现新内容: 岁岁 (netease:song:2098161478)
2026-01-20 12:43:45,555 - app.services.media_service - INFO - 发现新内容: 岁岁 (伴奏) (netease:song:2098163661)
2026-01-20 12:43:45,561 - app.services.media_service - INFO - 发现新内容: 大梦 (Live) (netease:song:2083989384)
2026-01-20 12:43:45,566 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 亲爱的小孩 (已存在于 qqmusic)
2026-01-20 12:43:45,567 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 北方 (已存在于 qqmusic)
2026-01-20 12:43:45,568 - app.services.media_service - INFO - 发现新内容: 北方 (伴奏) (netease:song:1939461534)
2026-01-20 12:43:45,574 - app.services.media_service - INFO - 发现新内容: 风吹过的时候 (伴奏) (netease:song:1862310199)
2026-01-20 12:43:45,580 - app.services.media_service - INFO - 发现新内容: 风吹过的时候 (完整版) (netease:song:1862309199)
2026-01-20 12:43:45,586 - app.services.media_service - INFO - 发现新内容: 风吹过的时候 (伴奏) (netease:song:1861622024)
2026-01-20 12:43:45,592 - app.services.media_service - INFO - 发现新内容: 风吹过的时候 (完整版) (netease:song:1861622023)
2026-01-20 12:43:45,598 - app.services.media_service - INFO - 发现新内容: 我要你 (netease:song:1856760665)
2026-01-20 12:43:45,603 - app.services.media_service - INFO - 发现新内容: 有一点动心 (netease:song:1825627497)
2026-01-20 12:43:45,610 - app.services.media_service - INFO - 跳过重复内容 (跨平台): 我要你 (已存在于 qqmusic)
2026-01-20 12:43:45,611 - app.services.media_service - INFO - 跳过重复内容 (跨平台): Unsaid (已存在于 qqmusic)
2026-01-20 12:43:45,611 - app.services.media_service - INFO - Immediate sync finished for 任素汐. Added 31 new songs.
2026-01-20 12:43:45,612 - app.services.media_service - INFO - Auto-cache start: Found 4 recent songs missing local file.
2026-01-20 12:43:45,612 - app.services.media_service - INFO - Auto-caching recent song: 困 (qqmusic)
2026-01-20 12:43:45,612 - core.audio_downloader - INFO - 开始处理: 任素汐 - 困
2026-01-20 12:43:45,613 - core.audio_downloader - INFO - Search Songs [tencent]: 困 任素汐
2026-01-20 12:43:46,521 - core.audio_downloader - INFO - Search Songs [tencent]: 困 任素汐
2026-01-20 12:43:48,117 - core.audio_downloader - INFO - Search Songs [netease]: 困 任素汐
2026-01-20 12:43:48,632 - core.audio_downloader - INFO - Search Songs [netease]: 困 任素汐
2026-01-20 12:43:50,246 - core.audio_downloader - INFO - 跨源匹配成功 (高音质) [netease]: 3322756981 (945k)
2026-01-20 12:43:50,246 - core.audio_downloader - INFO - 正在下载音频流...
2026-01-20 12:43:51,931 - core.audio_downloader - INFO - 跨源匹配成功 (高音质) [netease]: 3322756981 (945k)
2026-01-20 12:43:51,932 - core.audio_downloader - INFO - 正在下载音频流...
2026-01-20 12:43:52,482 - app.routers.media - INFO - 删除歌手 任素汐 (netease) 及其 31 首歌曲
2026-01-20 12:43:52,499 - app.routers.media - INFO - 删除歌手 任素汐 (qqmusic) 及其 23 首歌曲
2026-01-20 12:43:52,636 - core.audio_downloader - INFO - 正在获取歌词...
2026-01-20 12:43:52,737 - core.audio_downloader - INFO - 正在获取歌词...
2026-01-20 12:43:53,469 - core.audio_downloader - INFO - 酷狗歌词获取成功: 困
2026-01-20 12:43:53,469 - core.audio_downloader - INFO - 歌词获取成功: 困
2026-01-20 12:43:53,470 - core.audio_downloader - INFO - 正在下载封面图...
2026-01-20 12:43:53,524 - core.audio_downloader - INFO - 写入文件: audio_cache\任素汐 - 困.flac
2026-01-20 12:43:53,540 - core.audio_downloader - INFO - 酷狗歌词获取成功: 困
2026-01-20 12:43:53,541 - core.audio_downloader - INFO - 歌词获取成功: 困
2026-01-20 12:43:53,541 - core.audio_downloader - INFO - 正在下载封面图...
2026-01-20 12:43:53,543 - core.audio_downloader - INFO - 歌词注入成功 (FLAC): audio_cache\任素汐 - 困.flac
2026-01-20 12:43:53,556 - core.audio_downloader - INFO - 元数据注入成功: audio_cache\任素汐 - 困.flac
2026-01-20 12:43:53,560 - app.services.media_service - ERROR - Auto-cache job failed: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: UPDATE statement on table 'media_records' expected to update 1 row(s); 0 were matched. (Background on this error at: https://sqlalche.me/e/20/7s2a)
2026-01-20 12:43:53,623 - core.audio_downloader - INFO - 写入文件: audio_cache\任素汐 - 困.flac
2026-01-20 12:43:53,645 - core.audio_downloader - INFO - 歌词注入成功 (FLAC): audio_cache\任素汐 - 困.flac
2026-01-20 12:43:53,657 - core.audio_downloader - INFO - 元数据注入成功: audio_cache\任素汐 - 困.flac
2026-01-20 12:43:53,659 - app.services.media_service - ERROR - Auto-cache job failed: This Session's transaction has been rolled back due to a previous exception during flush. To begin a new transaction with this Session, first issue Session.rollback(). Original exception was: UPDATE statement on table 'media_records' expected to update 1 row(s); 0 were matched. (Background on this error at: https://sqlalche.me/e/20/7s2a)
2026-01-20 12:44:24,358 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:44:24,358 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:44:24,359 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:44:24,359 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:44:24,359 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:47:47,694 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:47:47,695 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:47:47,695 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:47:47,695 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:47:47,695 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:48:47,686 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:48:47,687 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:48:47,687 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:48:47,687 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:48:47,688 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 12:48:56,337 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 12:48:56,337 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 12:48:56,338 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 12:48:56,338 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 12:48:56,338 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 13:05:36,817 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 13:05:36,817 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 13:05:36,818 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 13:05:36,818 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 13:05:36,818 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 13:06:05,149 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 13:06:05,150 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 13:06:05,150 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 13:06:05,150 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 13:06:05,151 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 13:06:55,760 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 13:06:55,761 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 13:06:55,761 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 13:06:55,762 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 13:06:55,762 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 13:07:05,942 - core.security - WARNING - Signature expired for expired_id
2026-01-20 13:12:12,983 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 13:12:12,984 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 13:12:12,984 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 13:12:12,985 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 13:12:12,985 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 13:13:29,457 - app.routers.media - INFO - 删除歌手 宿羽阳 (netease) 及其 6 首歌曲
2026-01-20 13:13:29,470 - app.routers.media - INFO - 删除歌手 宿羽阳 (qqmusic) 及其 8 首歌曲
2026-01-20 13:13:31,413 - app.routers.media - INFO - 删除歌手 李剑青 (netease) 及其 12 首歌曲
2026-01-20 13:13:31,427 - app.routers.media - INFO - 删除歌手 李剑青 (qqmusic) 及其 15 首歌曲
2026-01-20 16:12:49,307 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 16:12:49,307 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 16:12:49,308 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 16:20:31,693 - core.security - WARNING - Signature mismatch for manual_任素汐_困
2026-01-20 16:23:37,382 - core.security - WARNING - Signature mismatch for manual_任素汐_困
2026-01-20 16:28:27,152 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 16:28:27,153 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 16:28:27,153 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 16:36:06,727 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:36:28,661 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:38:23,222 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 16:38:23,223 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 16:38:23,223 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 16:38:23,223 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 16:38:23,224 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 16:38:59,126 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:39:23,861 - app.routers.media - INFO - File missing for 我不要原谅你 (ID:manual_宿羽阳_我不要原谅你), attempting immediate re-download...
2026-01-20 16:39:23,861 - core.audio_downloader - INFO - 开始处理: 宿羽阳 - 我不要原谅你
2026-01-20 16:39:25,189 - core.audio_downloader - INFO - Search Songs [netease]: 我不要原谅你 宿羽阳
2026-01-20 16:39:28,695 - core.audio_downloader - INFO - 跨源匹配成功 (高音质) [netease]: 3336533365 (1591k)
2026-01-20 16:39:28,695 - core.audio_downloader - INFO - 正在下载音频流...
2026-01-20 16:39:32,401 - core.audio_downloader - INFO - 正在获取歌词...
2026-01-20 16:39:33,092 - core.audio_downloader - INFO - 酷狗歌词获取成功: 我不要原谅你
2026-01-20 16:39:33,093 - core.audio_downloader - INFO - 歌词获取成功: 我不要原谅你
2026-01-20 16:39:33,093 - core.audio_downloader - INFO - 写入文件: audio_cache\宿羽阳 - 我不要原谅你.flac
2026-01-20 16:39:33,111 - core.audio_downloader - INFO - 歌词注入成功 (FLAC): audio_cache\宿羽阳 - 我不要原谅你.flac
2026-01-20 16:39:33,112 - core.audio_downloader - INFO - 元数据注入成功: audio_cache\宿羽阳 - 我不要原谅你.flac
2026-01-20 16:39:33,118 - asyncio - ERROR - Exception in callback _ProactorBasePipeTransport._call_connection_lost()
handle: <Handle _ProactorBasePipeTransport._call_connection_lost()>
Traceback (most recent call last):
  File "C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\asyncio\proactor_events.py", line 165, in _call_connection_lost
    self._sock.shutdown(socket.SHUT_RDWR)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2026-01-20 16:40:11,412 - asyncio - ERROR - Exception in callback _ProactorBasePipeTransport._call_connection_lost()
handle: <Handle _ProactorBasePipeTransport._call_connection_lost()>
Traceback (most recent call last):
  File "C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\asyncio\proactor_events.py", line 165, in _call_connection_lost
    self._sock.shutdown(socket.SHUT_RDWR)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2026-01-20 16:40:20,137 - core.security - WARNING - Signature mismatch for manual_任素汐_困
2026-01-20 16:40:36,736 - app.routers.media - INFO - 删除歌手 宿羽阳 (netease) 及其 0 首歌曲
2026-01-20 16:40:36,745 - app.routers.media - INFO - 删除歌手 宿羽阳 (qqmusic) 及其 0 首歌曲
2026-01-20 16:46:48,691 - asyncio - ERROR - Exception in callback _ProactorBasePipeTransport._call_connection_lost()
handle: <Handle _ProactorBasePipeTransport._call_connection_lost()>
Traceback (most recent call last):
  File "C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\asyncio\proactor_events.py", line 165, in _call_connection_lost
    self._sock.shutdown(socket.SHUT_RDWR)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2026-01-20 16:46:48,697 - asyncio - ERROR - Exception in callback _ProactorBasePipeTransport._call_connection_lost()
handle: <Handle _ProactorBasePipeTransport._call_connection_lost()>
Traceback (most recent call last):
  File "C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\leo89\AppData\Local\Programs\Python\Python313\Lib\asyncio\proactor_events.py", line 165, in _call_connection_lost
    self._sock.shutdown(socket.SHUT_RDWR)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2026-01-20 16:54:42,448 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 16:54:42,448 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 16:54:42,449 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 16:54:42,449 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 16:54:42,449 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
2026-01-20 16:55:12,405 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:55:14,937 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:55:15,497 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:55:17,917 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:55:47,885 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:55:48,324 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:59:12,150 - core.security - WARNING - Signature mismatch for manual_宿羽阳_我不要原谅你
2026-01-20 16:59:31,641 - app.routers.system - INFO - Configuration updated via API
2026-01-20 16:59:40,854 - app.routers.system - INFO - Configuration updated via API
2026-01-20 17:00:47,624 - __main__ - INFO - 已调度 netease 任务，每 60 分钟执行一次
2026-01-20 17:00:47,624 - __main__ - INFO - 已调度 qqmusic 任务，每 60 分钟执行一次
2026-01-20 17:00:47,624 - __main__ - INFO - 已调度文件完整性检查任务，每 24 小时执行一次
2026-01-20 17:00:47,625 - __main__ - INFO - 已调度缓存清理任务，每 24 小时执行一次
2026-01-20 17:00:47,625 - __main__ - INFO - 已调度自动缓存任务，每 30 分钟执行一次
